"use strict";(self.webpackChunkcollider_client=self.webpackChunkcollider_client||[]).push([[828],{437:()=>{},828:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var a=i(950),n=i(429),s=i(271),l=(i(437),i(414));const r=()=>{const{id:e}=(0,n.g)(),t=(0,n.Zp)(),i=Boolean(e),{currentEvent:r,loading:c,error:d,fetchEventById:o,addEvent:m,editEvent:u}=(0,s.LJ)(),[h,p]=(0,a.useState)({title:"",date:"",description:"",image:"",status:"upcoming",lineup:"",location:"",ticketLink:""}),[x,j]=(0,a.useState)(i),[g,v]=(0,a.useState)("");(0,a.useEffect)((()=>{if(i){(async()=>{try{j(!0),await o(e)}catch(g){v("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u044f")}finally{j(!1)}})()}}),[i,e,o]),(0,a.useEffect)((()=>{r&&i&&p({title:r.title||"",date:r.date?new Date(r.date).toISOString().split("T")[0]:"",description:r.description||"",image:r.image||"",status:r.status||"upcoming",lineup:r.lineup||"",location:r.location||"",ticketLink:r.ticketLink||""})}),[r,i]);const b=e=>{const{name:t,value:i}=e.target;p((e=>({...e,[t]:i})))};return(x||c)&&i?(0,l.jsx)("div",{className:"admin-loading",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u044f..."}):(0,l.jsxs)("div",{className:"admin-event-form-container",children:[(0,l.jsx)("h2",{children:i?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),(g||d)&&(0,l.jsx)("div",{className:"admin-form-error",children:g||d}),(0,l.jsxs)("form",{className:"admin-event-form",onSubmit:async a=>{if(a.preventDefault(),h.title&&h.date&&h.description){j(!0),v("");try{i?await u(e,h):await m(h),t("/admin/events")}catch(g){v(g.error||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"),j(!1)}}else v("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f")},children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"title",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f *"}),(0,l.jsx)("input",{type:"text",id:"title",name:"title",value:h.title,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"date",children:"\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f *"}),(0,l.jsx)("input",{type:"date",id:"date",name:"date",value:h.date,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"status",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),(0,l.jsxs)("select",{id:"status",name:"status",value:h.status,onChange:b,children:[(0,l.jsx)("option",{value:"upcoming",children:"\u041f\u0440\u0435\u0434\u0441\u0442\u043e\u044f\u0449\u0435\u0435"}),(0,l.jsx)("option",{value:"past",children:"\u041f\u0440\u043e\u0448\u0435\u0434\u0448\u0435\u0435"})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"description",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f *"}),(0,l.jsx)("textarea",{id:"description",name:"description",value:h.description,onChange:b,rows:"5",required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"image",children:"URL \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"}),(0,l.jsx)("input",{type:"text",id:"image",name:"image",value:h.image,onChange:b,placeholder:"URL \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"}),(0,l.jsxs)("div",{className:"image-upload-container",children:[(0,l.jsx)("button",{type:"button",className:"admin-btn admin-btn-secondary",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),h.image&&(0,l.jsx)("div",{className:"image-preview",children:(0,l.jsx)("img",{src:h.image,alt:"\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"lineup",children:"\u041b\u0430\u0439\u043d-\u0430\u043f"}),(0,l.jsx)("textarea",{id:"lineup",name:"lineup",value:h.lineup,onChange:b,rows:"3",placeholder:"\u0421\u043f\u0438\u0441\u043e\u043a \u0432\u044b\u0441\u0442\u0443\u043f\u0430\u044e\u0449\u0438\u0445 \u0430\u0440\u0442\u0438\u0441\u0442\u043e\u0432, \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0437\u0430\u043f\u044f\u0442\u044b\u043c\u0438"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"location",children:"\u041c\u0435\u0441\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f"}),(0,l.jsx)("input",{type:"text",id:"location",name:"location",value:h.location,onChange:b})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"ticketLink",children:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0431\u0438\u043b\u0435\u0442\u044b"}),(0,l.jsx)("input",{type:"url",id:"ticketLink",name:"ticketLink",value:h.ticketLink,onChange:b,placeholder:"https://..."})]}),(0,l.jsxs)("div",{className:"form-buttons",children:[(0,l.jsx)("button",{type:"button",className:"admin-btn admin-btn-secondary",onClick:()=>t("/admin/events"),children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,l.jsx)("button",{type:"submit",className:"admin-btn admin-btn-primary",disabled:x||c,children:x||c?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})}}}]);