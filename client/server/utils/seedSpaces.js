const mongoose = require('mongoose');
require('dotenv').config();
const Space = require('../models/Space');
const connectDB = require('../config/db');

// Массив с первоначальными данными для пространств
const spaces = [
  {
    id: 'main-hall',
    name: 'Главный зал',
    capacity: 'до 500 человек',
    size: '800 кв.м',
    description: 'Многофункциональное пространство для проведения концертов, вечеринок, выставок и других масштабных мероприятий. Оснащено профессиональным звуковым и световым оборудованием.',
    features: [
      'Профессиональная звуковая система',
      'Световое оборудование премиум-класса',
      'Сцена 10x6м',
      'Бар',
      'Гардероб',
      'Система вентиляции',
      'Доступ для людей с ограниченными возможностями'
    ],
    images: [
      '/images/spaces/main-hall-1.jpg',
      '/images/spaces/main-hall-2.jpg',
      '/images/spaces/main-hall-3.jpg'
    ],
    pricing: {
      amount: 20000,
      period: 'day',
      details: [
        'Звуковая система включена',
        'Базовое световое оборудование',
        'Техническая поддержка',
        'Гардероб',
        'Охрана'
      ]
    },
    status: 'available',
    featured: true
  },
  {
    id: 'studio',
    name: 'Студия звукозаписи',
    capacity: 'до 15 человек',
    size: '120 кв.м',
    description: 'Профессиональная студия звукозаписи с акустически обработанными помещениями и высококачественным оборудованием для записи музыки, подкастов и озвучивания.',
    features: [
      'Акустически обработанные помещения',
      'Контрольная комната',
      'Вокальная кабина',
      'Студийные мониторы Genelec',
      'Профессиональные микрофоны',
      'Pro Tools и Ableton Live',
      'Гостиная для музыкантов'
    ],
    images: [
      '/images/spaces/studio-1.jpg',
      '/images/spaces/studio-2.jpg',
      '/images/spaces/studio-3.jpg'
    ],
    pricing: {
      amount: 800,
      period: 'hour',
      details: [
        'Звукорежиссер включен',
        'Все оборудование студии',
        'Аудиоредактирование',
        'Комната отдыха для музыкантов',
        'Чай/кофе'
      ]
    },
    status: 'available',
    featured: true
  },
  {
    id: 'gallery',
    name: 'Арт-галерея',
    capacity: 'до 200 человек',
    size: '350 кв.м',
    description: 'Выставочное пространство для проведения художественных выставок, инсталляций и презентаций. Нейтральный интерьер и регулируемое освещение позволяют адаптировать пространство под различные концепции.',
    features: [
      'Регулируемое LED-освещение',
      'Подвесная система для картин',
      'Белые стены галерейного типа',
      'Проекционное оборудование',
      'Wi-Fi',
      'Зона для кофе-брейка',
      'Охранная система'
    ],
    images: [
      '/images/spaces/gallery-1.jpg',
      '/images/spaces/gallery-2.jpg',
      '/images/spaces/gallery-3.jpg'
    ],
    pricing: {
      amount: 10000,
      period: 'day',
      details: [
        'Освещение включено',
        'Базовая инсталляция',
        'Стены для экспозиции',
        'Возможность фуршета',
        'Wi-Fi'
      ]
    },
    status: 'available',
    featured: false
  },
  {
    id: 'workshop',
    name: 'Мастерские',
    capacity: 'до 30 человек на мастерскую',
    size: '5 мастерских по 60-80 кв.м',
    description: 'Пространства для творческих работ и образовательных мероприятий. Каждая мастерская оборудована с учётом специфики направления: светодизайн, визуальное искусство, аудиопроизводство, медиаарт и VR.',
    features: [
      'Рабочие столы и стулья',
      'Специализированное оборудование',
      'Хорошее естественное освещение',
      'Проекторы и экраны',
      'Место для хранения материалов',
      'Высокоскоростной интернет',
      'Кухня для участников'
    ],
    images: [
      '/images/spaces/workshop-1.jpg',
      '/images/spaces/workshop-2.jpg',
      '/images/spaces/workshop-3.jpg'
    ],
    pricing: {
      amount: 4000,
      period: 'day',
      details: [
        'Специализированное оборудование',
        'Место для хранения вещей',
        'Возможность аренды инструментов',
        'Доступ к кухне',
        'Wi-Fi'
      ]
    },
    status: 'available',
    featured: true
  },
  {
    id: 'cafe',
    name: 'Кафе',
    capacity: 'до 60 человек',
    size: '150 кв.м',
    description: 'Уютное кафе с качественной кухней и баром, где можно отдохнуть, провести неформальную встречу или небольшое мероприятие. Интерьер выполнен в современном стиле с элементами промышленного дизайна.',
    features: [
      'Бар с крафтовыми напитками',
      'Авторская кухня',
      'Большие обеденные столы',
      'Уютные диванные зоны',
      'Музыкальная система',
      'Wi-Fi',
      'Открытая терраса (в летнее время)'
    ],
    images: [
      '/images/spaces/cafe-1.jpg',
      '/images/spaces/cafe-2.jpg',
      '/images/spaces/cafe-3.jpg'
    ],
    pricing: {
      amount: 5000,
      period: 'day',
      details: [
        'Базовое меню включено',
        'Персонал кафе',
        'Музыкальное оборудование',
        'Возможность кастомизации пространства',
        'Wi-Fi'
      ]
    },
    status: 'available',
    featured: false
  }
];

// Функция для заполнения базы данных
const seedSpaces = async () => {
  try {
    // Подключение к базе данных
    await connectDB();
    console.log('База данных MongoDB подключена');
    
    // Очистка коллекции перед заполнением
    await Space.deleteMany({});
    console.log('Существующие пространства удалены');
    
    // Заполнение базы данных начальными данными
    const createdSpaces = await Space.create(spaces);
    console.log(`Создано ${createdSpaces.length} пространств`);
    
    // Закрытие соединения с базой данных
    mongoose.connection.close();
    console.log('Соединение с базой данных закрыто');
    
    process.exit(0);
  } catch (error) {
    console.error('Ошибка при заполнении базы данных:', error);
    process.exit(1);
  }
};

// Запуск функции заполнения базы данных
seedSpaces();